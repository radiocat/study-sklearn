# scikit-learnの勉強 - 2016年夏の高校野球編

## 地方大会の成績を使って代表校をクラスタリング


### 打撃成績

`batting-2016.csv`

以下のデータを元に作成

[【2016夏の甲子園】出場49校のチーム打率・打撃成績一覧〈完全版〉](http://a-bis.net/bbk/kokoyakyu/3742)

### 投手成績

`pitching-2016.csv`

以下のブログのデータを元に作成

[高校野球夏の甲子園出場校投手成績](http://koshien.site/wp/2016/08/05/%E9%AB%98%E6%A0%A1%E9%87%8E%E7%90%83%E5%A4%8F%E3%81%AE%E7%94%B2%E5%AD%90%E5%9C%92%E5%87%BA%E5%A0%B4%E6%A0%A1%E6%8A%95%E6%89%8B%E6%88%90%E7%B8%BE/)

### クラスタリング実行

`team-clustering.py`

詳細は [Qiita](http://qiita.com/radiocat/items/6fa86ae9ab435aabc48f) にまとめた


## 1,2回戦の結果を学習して2回戦後半の試合の得点力を予測

### 学習データ

`round1-result-2016.csv`

各代表校ごとの1回目の試合を全て学習

- 説明変数：該当校の打撃データと対戦相手の投手データ
- 目的変数：実際の得点数

上記を学習させたうえで2回戦後半（2回目の試合）を予測する

### 予測の実行と結果

`round2-game-2016.csv`

2回戦後半の組み合わせに対して学習データと同じ説明変数を与えて得点力を予測させた

詳細は [Qiita](http://qiita.com/radiocat/items/a4966127470f7a110ebe) にまとめた

予測した2回戦後半のチームの予測と実際の得点との差をまとめると以下の通り。

| チーム数 | 2点未満 | 5点以上 |
|----:|----:|----:|
| 17 | 9 | 4 |

## 3回戦の得点力予測

### 学習データ

`round2-study-2016.csv`

これまで使用した地方大会の投手成績は主力投手の成績だけに絞っていた。例えば花咲徳栄の場合は主力投手が自責点0で防御率も0だったが、実際にはチーム全体でみると失策などが絡むと失点は0ではない。チームとしての得点力を予測させるのでチーム全体の成績を使ったほうが得点力予測の精度は上がりそうだと考えて、投手成績のデータを見直し。以下のブログのデータを元に見直し。

[高校野球2016夏の甲子園優勝予想！オッズ！地方大会データ！](http://xn--6jwp9b1z2d.com/sports2015/高校野球2016夏の甲子園優勝予想！オッズ！データ/)

### 予測の実行と結果

`round3-game-predict-2016.csv`

見なおした学習データを使って予測し、実際の得点結果を比べた結果、予測と実際の得点との差をまとめると以下の通り。大きなズレは減ったが2点未満の数も少し減った。

| チーム数 | 2点未満 | 5点以上 |
|----:|----:|----:|
| 16 | 7 | 3 |

## 準々決勝の得点力予測

### 学習データ

`round1-3-study-2016.csv`

後半になると甲子園常連校のほうが強さを発揮するように感じたため出場回数を説明変数に追加。

### 予測の実行と結果

`round4-game-predict-2016.csv`

2点未満のズレは減ってしまったが多くが2〜3点前後のズレに収まった。

| チーム数 | 2点未満 | 5点以上 |
|----:|----:|----:|
| 8 | 1 | 2 |

## 準決勝の得点力予測

### 学習データ

`round1-4-study-2016.csv`

何回戦かという情報も説明変数に追加してみる。

### 予測の実行と結果

`round5-game-predict-2016.csv`

| チーム数 | 2点未満 | 5点以上 |
|----:|----:|----:|
| 4 | 2 | 1 |


## 決勝の得点力予測

### 学習データ

`round1-5-study-2016.csv`

学習データ、予測データは特に変更なし。

### 予測の実行と結果

`round6-game-predict-2016.csv`

近からず遠からずで2校とも2点台の誤差でした。

| チーム数 | 2点未満 | 5点以上 |
|----:|----:|----:|
| 2 | 0 | 0 |

